{"version":3,"sources":["components/Tags/Tags.js","store/actions/index.js","components/Post/Post.js","components/PostForm/PostForm.js","components/Wall/Wall.js","App.js","reportWebVitals.js","store/reducers/index.js","store/index.js","index.js"],"names":["Tags","tags","map","o","POST_EDIT_SUBMIT","POST_EDIT_CANCEL","POST_EDIT_CHANGE","POST_LIKE","POST_REMOVE","POST_HIDE","POST_EDIT","POST_SHOW","Post","post","author","photo","dispatch","useDispatch","hidden","src","avatar","className","width","height","alt","name","onClick","id","type","payload","created","hit","content","url","likedByMe","likes","PostForm","edited","useSelector","state","shallowEqual","firstFocusEl","useRef","handleChange","evt","target","value","editChange","onSubmit","preventDefault","current","focus","ref","placeholder","onChange","join","Wall","posts","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","empty","initialState","reduceEdit","action","find","undefined","reduceToggleVisibility","reduceRemove","filter","reduceLike","reduceCancel","reduceChange","parsed","split","prop","reduceSubmit","replace","trim","length","Date","now","store","createStore","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f0b42db7.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nfunction Tags({tags}) {\r\n    return (\r\n        <>\r\n          теги: {tags.map(o => <button key={o}>#{o}</button>)}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Tags\r\n","export const POST_EDIT_SUBMIT = 'POST_EDIT_SUBMIT';\r\nexport const POST_EDIT_CANCEL = 'POST_EDIT_CANCEL';\r\nexport const POST_EDIT_CHANGE = 'POST_EDIT_CHANGE';\r\nexport const POST_LIKE = 'POST_LIKE';\r\nexport const POST_REMOVE = 'POST_REMOVE';\r\nexport const POST_HIDE = 'POST_HIDE';\r\nexport const POST_EDIT = 'POST_EDIT';\r\nexport const POST_SHOW = 'POST_SHOW';\r\n\r\nexport const editSubmit = () => {\r\n    return {\r\n        type: POST_EDIT_SUBMIT,\r\n        payload: {},\r\n    };\r\n};\r\n\r\nexport const editCancel = () => {\r\n    return {\r\n        type: POST_EDIT_CANCEL,\r\n        payload: {},\r\n    };\r\n};\r\n\r\nexport const editChange = (name, value) => {\r\n    return {\r\n        type: POST_EDIT_CHANGE,\r\n        payload: {name, value},\r\n    };\r\n};\r\n\r\nexport const like = (id) => {\r\n    return {\r\n        type: POST_LIKE,\r\n        payload: {id},\r\n    };\r\n};\r\n\r\nexport const remove = (id) => {\r\n    return {\r\n        type: POST_REMOVE,\r\n        payload: {id},\r\n    };\r\n};\r\n\r\nexport const hide = (id) => {\r\n    return {\r\n        type: POST_HIDE,\r\n        payload: {id},\r\n    };\r\n};\r\n\r\nexport const edit = (id) => {\r\n    return {\r\n        type: POST_EDIT,\r\n        payload: {id},\r\n    };\r\n};\r\n\r\nexport const show = (id) => {\r\n    return {\r\n        type: POST_SHOW,\r\n        payload: {id},\r\n    };\r\n};","import React from 'react';\r\n//import PostsContext from '../../contexts/PostsContext';\r\nimport Tags from '../Tags/Tags';\r\nimport './Post.css';\r\nimport {like, remove, hide, edit, show} from '../../store/actions';\r\nimport {useDispatch} from 'react-redux';\r\n\r\nfunction Post({post}) {\r\n    const {author} = post;\r\n    const {photo} = post;    \r\n    const dispatch = useDispatch();\r\n    \r\n    const handleLike = () => {\r\n        dispatch(like(post.id));\r\n        //like(post.id);\r\n    };\r\n\r\n    const handleRemove = () => {\r\n        dispatch(remove(post.id));\r\n        //remove(post.id); \r\n    };   \r\n    \r\n    const handleHide = () => {\r\n        dispatch(hide(post.id));\r\n        //toggleVisibility(post.id);\r\n    };\r\n\r\n    const handleShow = () => {\r\n        dispatch(show(post.id));\r\n        //toggleVisibility(post.id);\r\n    };\r\n\r\n    const handleEdit = () => {\r\n        dispatch(edit(post.id));\r\n        //edit(post.id);  \r\n    };\r\n\r\n    if (post.hidden) {\r\n        return (\r\n            <article>\r\n                <header>\r\n                    <img src={author.avatar} className=\"Post-avatar\" width=\"50\" height=\"50\" alt={author.name}/>\r\n                    <h5>{author.name}</h5>\r\n                    <button onClick={handleShow}>показать</button>\r\n                </header>\r\n            </article>\r\n        );\r\n    }\r\n\r\n\r\n    return (\r\n    <article>\r\n        <header>\r\n            <img src={author.avatar} className=\"Post-avatar\" width=\"50\" height=\"50\" alt={author.name}/>\r\n            <h5>{author.name}</h5>\r\n            <button onClick={handleRemove}>удалить</button>\r\n            <button onClick={handleHide}>скрыть</button>\r\n            <button onClick={handleEdit}>изменить</button>\r\n            <div>{post.created}</div>\r\n            {post.hit && <span>HIT</span>}\r\n        </header>\r\n        <div>\r\n            <div className=\"Post-content\">{post.content}</div>\r\n            {photo && <img src={photo.url} alt={photo.alt} className=\"Post-photo\"/>}\r\n        </div>\r\n        <footer>\r\n            <span className=\"Post-likes\" onClick={handleLike}>\r\n                <img \r\n                src={post.likedByMe ? \"https://itchief.ru/assets/images/other/heart.svg\" : \"https://img.icons8.com/ios/500/like--v2.png\"} \r\n                alt=\"likes\" \r\n                width=\"20\" \r\n                height=\"20\"\r\n                />\r\n                <span className=\"Post-likes-count\">{post.likes}</span>\r\n                {post.tags && <Tags tags={post.tags}/>}\r\n            </span>\r\n        </footer>\r\n    </article>\r\n    );\r\n}\r\n\r\nexport default Post\r\n","import React, { useRef } from 'react'\r\n//import PostsContext from '../../contexts/PostsContext';\r\nimport { editCancel, editChange, editSubmit } from '../../store/actions';\r\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\r\n\r\n\r\nfunction PostForm() {\r\n    const dispatch = useDispatch();\r\n    const edited = useSelector((state) => state.edited, shallowEqual);\r\n    const firstFocusEl = useRef(null);\r\n\r\n    const handleSubmit = (evt) => {\r\n        evt.preventDefault();\r\n        dispatch(editSubmit());\r\n        //dispatch({type: 'POST_EDIT_SUBMIT'});\r\n        //submit();\r\n        firstFocusEl.current.focus();\r\n    };\r\n\r\n    const handleChange = (evt) => {\r\n        const { name, value } = evt.target;\r\n        dispatch(editChange(name, value));\r\n        //dispatch({type: 'POST_EDIT_CHANGE', payload: {name, value}});\r\n        //change({name, value});\r\n    };\r\n\r\n    const handleReset = (evt) => {\r\n        evt.preventDefault();\r\n        dispatch(editCancel());\r\n        //dispatch({type: 'POST_EDIT_CANCEL'});\r\n        //cancel();\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <textarea\r\n                ref={firstFocusEl}\r\n                name=\"content\"\r\n                placeholder=\"content\"\r\n                value={edited.content || ''}\r\n                onChange={handleChange}\r\n            />\r\n            <input\r\n                name=\"tags\"\r\n                placeholder=\"tags\"\r\n                value={edited.tags?.join(' ') || ''}\r\n                onChange={handleChange}\r\n            />\r\n            <input\r\n                name=\"photo\"\r\n                placeholder=\"photo\"\r\n                value={edited.photo?.url || ''}\r\n                onChange={handleChange}\r\n            />\r\n            <input\r\n                name=\"alt\"\r\n                placeholder=\"alt\"\r\n                value={edited.photo?.alt || ''}\r\n                onChange={handleChange}\r\n            />\r\n            <button>Ok</button>\r\n            {edited.id !== 0 && <button onClick={handleReset}>Отменить</button>}\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PostForm\r\n","import React from 'react'\r\nimport { shallowEqual, useSelector } from 'react-redux';\r\n//import PostsContext from '../../contexts/PostsContext';\r\nimport Post from '../Post/Post';\r\nimport PostForm from '../PostForm/PostForm';\r\n\r\nfunction Wall() {\r\n  \r\n  const posts = useSelector((state) => state.posts, shallowEqual);\r\n  //const {state: {posts}} = useContext(PostsContext);\r\n  \r\n  \r\n  // const [posts, setPosts] = useState([\r\n  //   {\r\n  //     id:2,\r\n  //     author: {\r\n  //       id: 1,\r\n  //       avatar: 'https://lms.openjs.io/logo_js.svg',\r\n  //       name: 'OpenJS',\r\n  //     },\r\n  //     content: 'Ну как, вы справились с домашкой?',\r\n  //     photo: null,\r\n  //     hit: true,\r\n  //     likes: 222,\r\n  //     likedByMe: true,\r\n  //     hidden: true,\r\n  //     tags: [\"deadline\", \"homework\"],\r\n  //     created: 1603774800,\r\n  //   },\r\n  //   {\r\n  //     id:1,\r\n  //     author: {\r\n  //       id: 1,\r\n  //       avatar: 'https://lms.openjs.io/logo_js.svg',\r\n  //       name: 'OpenJS',\r\n  //     },\r\n  //     content: null,\r\n  //     photo: {\r\n  //         url: 'https://lms.openjs.io/openjs.jpg',\r\n  //         alt: 'openjs logo',\r\n  //     },\r\n  //     hit: true,\r\n  //     likes: 10,\r\n  //     likedByMe: true,\r\n  //     hidden: false,\r\n  //     tags: [],\r\n  //     created: 1603501200,\r\n  //   }\r\n  // ]);\r\n  //const [editingStarted, setEditingStarted] = useState(false);\r\n  //const [edited, setEdited] = useState();\r\n\r\n  // const handlePostSave = (post) => {\r\n  //   save(post);\r\n  // };\r\n\r\n  // const handleCancelEditing = () => {\r\n  //   cancel();\r\n  // };\r\n\r\n  return (\r\n    <>\r\n      <PostForm />\r\n      <div>\r\n        {posts.map(o => <Post key={o.id} post={o}/>)}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Wall\r\n","import React from 'react';\n//import Message from './components/Message/Message';\n//import Post from './components/Post/Post';\nimport Wall from './components/Wall/Wall';\n//import PostsProvider from './contexts/PostsProvider';\n\nfunction App() {\n  \n  return (\n    <div className=\"App\">\n      <Wall />   \n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {\r\n    POST_EDIT,\r\n    POST_EDIT_CANCEL,\r\n    POST_EDIT_CHANGE,\r\n    POST_EDIT_SUBMIT,\r\n    POST_HIDE,\r\n    POST_LIKE,\r\n    POST_SHOW,\r\n    POST_REMOVE\r\n} from '../actions'\r\n\r\nconst empty = {\r\n    id: 0,\r\n    author: {\r\n        avatar: 'https://ikonki.svgpng.ru/wp-content/uploads/2021/02/Inkognitolsvg.svg',\r\n        name: 'Matin',\r\n    },\r\n    content: '',\r\n    photo: null,\r\n    hit: false,\r\n    likes: 0,\r\n    likedByMe: false,\r\n    hidden: false,\r\n    tags: null,\r\n    created: 0,\r\n};\r\n\r\nexport const initialState = {\r\n    posts: [],\r\n    edited: empty,\r\n};\r\n\r\nexport const reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case POST_EDIT_SUBMIT:\r\n            return reduceSubmit(state, action);\r\n        case POST_EDIT_CANCEL:\r\n            return reduceCancel(state, action);\r\n        case POST_EDIT_CHANGE:\r\n            return reduceChange(state, action);\r\n        case POST_LIKE:\r\n            return reduceLike(state, action);\r\n        case POST_REMOVE:\r\n            return reduceRemove(state, action);\r\n        case POST_HIDE:\r\n            return reduceToggleVisibility(state, action);\r\n        case POST_EDIT:\r\n            return reduceEdit(state, action);\r\n        case POST_SHOW:\r\n            return reduceToggleVisibility(state, action);\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nconst reduceEdit = (state, action) => {\r\n    const { posts } = state;\r\n    const { payload: { id } } = action;\r\n    const post = posts.find(o => o.id === id);\r\n    \r\n    if (post === undefined) {\r\n        return;\r\n    }\r\n\r\n    return {\r\n        ...state, \r\n        edited: post,\r\n    };\r\n};\r\n\r\nconst reduceToggleVisibility = (state, action) => {\r\n    const { posts } = state;\r\n    const { payload: { id } } = action;\r\n    return {\r\n        ...state,\r\n        posts: posts.map((o) => {\r\n            if (o.id !== id) {\r\n                return o;\r\n            }\r\n\r\n            const hidden = !o.hidden;\r\n            return { ...o, hidden };\r\n        }),\r\n    };\r\n};\r\n\r\nconst reduceRemove = (state, action) => {\r\n    const { posts } = state;\r\n    const { payload: { id } } = action;\r\n    return {\r\n        ...state,\r\n        posts: posts.filter((o) => o.id !== id),\r\n    };\r\n};\r\n\r\nconst reduceLike = (state, action) => {\r\n    const { posts } = state;\r\n    const { payload: { id } } = action;\r\n    return {\r\n        ...state,\r\n        posts: posts.map((o) => {\r\n            if (o.id !== id) {\r\n                return o;\r\n            }\r\n\r\n            const likedByMe = !o.likedByMe;\r\n            const likes = likedByMe ? o.likes + 1 : o.likes - 1;\r\n            return { ...o, likedByMe, likes };\r\n        }),\r\n    }\r\n};\r\n\r\nconst reduceCancel = (state, action) => {\r\n    return {\r\n        ...state,\r\n        edited: empty,\r\n    };\r\n};\r\n\r\nconst reduceChange = (state, action) => {\r\n    const { edited } = state;\r\n    const { payload: { name, value } } = action;\r\n    if (name === 'tags') {\r\n        const parsed = value.split(' ');\r\n        return {\r\n            ...state,\r\n            edited: { ...edited, [name]: parsed },\r\n        };\r\n    }\r\n\r\n    if (name === 'photo' || name === 'alt') {\r\n        const prop = name === 'photo' ? 'url' : name;\r\n        return {\r\n            ...state,\r\n            edited: { ...edited, photo: { ...edited.photo, [prop]: value } },\r\n        }\r\n    }\r\n\r\n    return {\r\n        ...state,\r\n        edited: { ...edited, [name]: value },\r\n    }\r\n};\r\n\r\nconst reduceSubmit = (state, action) => {\r\n    const { edited, posts } = state;\r\n    const parsed = edited.tags?.map(o => o.replace('#', '')).filter(o => o.trim() !== '') || [];\r\n    const tags = parsed.length !== 0 ? parsed : null;\r\n    const post = {\r\n        ...edited,\r\n        id: edited.id || Date.now(),\r\n        created: edited.created || Date.now(),\r\n        tags,\r\n        photo: edited.photo?.url ? { alt: '', ...edited.photo } : null\r\n        // photo: post.photo?.url ? { alt: '', ...post.photo } : null \r\n    };\r\n\r\n    if (edited?.id === 0) {\r\n        return {\r\n            ...state,\r\n            posts: [{ ...post }, ...posts],\r\n            edited: empty,\r\n        };\r\n    }\r\n\r\n    return {\r\n        ...state,\r\n        posts: posts.map((o) => {\r\n            if (o.id !== post.id) {\r\n                return o;\r\n            }\r\n            return { ...post };\r\n        }),\r\n        edited: empty,\r\n    }\r\n};","import { createStore } from \"redux\";\r\nimport { reducer } from \"./reducers\";\r\n\r\nconst store = createStore(reducer);\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport store from './store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}